# Технічна документація: Освітній AR/VR проєкт "Графіки функцій у 3D"

Цей документ містить технічні деталі та архітектуру проєкту "Графіки функцій у 3D". Він призначений для розробників, які бажають зрозуміти, модифікувати або розширити функціонал проєкту.

## 1. Огляд проєкту

Проєкт "Графіки функцій у 3D" – це веб-застосунок, який використовує можливості WebXR (або специфічні AR/VR бібліотеки) для візуалізації математичних функцій (явні, параметричні, поверхні) у тривимірному просторі. Основна мета – надати інтерактивний освітній інструмент для глибокого розуміння математичних концепцій через візуалізацію.

## 2. Структура проєкту

Проєкт дотримується наступної ієрархічної структури файлів:

educational-ar-project/
├── index.html                 # Головна сторінка з навігацією
├── README.md                  # Документація проєкту
├── assets/                    # Ресурси проєкту
│   ├── models/               # 3D моделі (.glb, .gltf) - для кастомних елементів сцени
│   ├── textures/             # Текстури та зображення
│   ├── markers/              # Маркери для AR (.mind, .png) - якщо використовується маркерний AR
│   ├── sounds/               # Аудіо файли (опціонально)
│   └── fonts/                # Шрифти (.json, .png) - для 3D тексту
├── libs/                     # Бібліотеки та залежності
│   ├── aframe/              # A-Frame файли (якщо використовується A-Frame)
│   ├── three/               # Three.js файли (базова бібліотека для 3D)
│   ├── mindar/              # MindAR файли (для маркерного AR)
│   └── ml-models/           # ML моделі для інформатиків (для розпізнавання формул)
├── src/                      # Вихідний код
│   ├── components/          # Користувацькі A-Frame компоненти (якщо A-Frame)
│   ├── utils/               # Допоміжні функції (математичний парсер, генератори геометрії)
│   └── ml/                  # ML код для інформатиків (інтеграція TensorFlow.js)
├── docs/                     # Документація
│   ├── user-guide.md        # Посібник користувача
│   ├── technical-docs.md    # Технічна документація
│   └── presentation.md      # Матеріали презентації
└── examples/                 # Приклади та демо
├── basic-example.html   # Базовий приклад
└── advanced-demo.html   # Складний приклад / Основне демо


## 3. Використані технології та бібліотеки

* **HTML5, CSS3, JavaScript (ES6+):** Стандартні веб-технології для структури, стилізації та логіки.
* **Three.js:** Основна JavaScript бібліотека для створення та рендерингу 3D графіки у веб-браузері. Всі 3D об'єкти (графіки, осі, сітки) створюються та маніпулюються через Three.js.
* **A-Frame (якщо використовується):** Веб-фреймворк для створення VR/AR досвіду з декларативним HTML. A-Frame спрощує роботу з Three.js та WebXR, надаючи готові компоненти та сутності. Це робить розробку швидшою та менш "низькорівневою".
* **MindAR (для AR_MARKER):** Легка бібліотека для доповненої реальності на основі маркерів. Використовується для розпізнавання плоских зображень (маркерів) та прив'язки до них 3D контенту.
* **WebXR Device API (для AR_MARKERLESS/VR):** Стандартний API для доступу до можливостей віртуальної та доповненої реальності безпосередньо у браузері. A-Frame та Three.js використовують його для рендерингу в immersive sessions.
* **Math.js (або інший математичний парсер):** Бібліотека для парсингу та обчислення математичних виразів, введених користувачем (наприклад, `eval('sin(x) + cos(y)')`). Це дозволяє динамічно генерувати графіки з довільних формул.
* **TensorFlow.js (для опціонального ML функціоналу):** JavaScript бібліотека для машинного навчання. Використовується для розпізнавання рукописних формул або інших ML-задач, якщо це реалізовано.

## 4. Архітектура застосунку

### 4.1. Основний потік даних

1.  **Введення користувача:** Користувач вводить математичну формулу та параметри (діапазони, коефіцієнти) через HTML-форму або інтерфейс.
2.  **Парсинг формули:** Введена строкова формула передається до **математичного парсера** (`src/utils/math-parser.js` або інтегрований Math.js). Парсер перетворює строкове представлення на обчислювальне дерево або функцію.
3.  **Генерація даних:** На основі спарсеної функції та заданих діапазонів, **генератор геометрії** (`src/utils/geometry-generator.js`) обчислює набір точок (вершин) та їх з'єднань (індексів) для 3D моделі (наприклад, `BufferGeometry` у Three.js).
    * Для **$y=f(x)$ та параметричних кривих**: генерується набір точок у 3D просторі, які потім з'єднуються у лінії.
    * Для **$z=f(x,y)$ (поверхні)**: генерується сітка точок на площині XY, для кожної з яких обчислюється $z$-координата. Потім ці точки формують трикутники для створення поверхні.
4.  **Створення 3D об'єктів:** Отримані дані передаються до **Three.js** (або A-Frame), де створюються відповідні 3D об'єкти (`Line`, `Mesh`) з матеріалами та освітленням.
5.  **Рендеринг:** Three.js рендерить сцену, відображаючи графіки на екрані.
6.  **Інтерактивність:** Обробники подій (миша, дотик, AR-жести) дозволяють користувачеві взаємодіяти зі сценою (обертати, масштабувати, переміщувати камеру) або динамічно змінювати параметри функції, запускаючи повторну генерацію та оновлення графіку.

### 4.2. Специфіка AR/VR реалізації

* **A-Frame (для декларативного підходу):** Сцена A-Frame (`<a-scene>`) ініціалізує Three.js рендерер та WebXR. Кастомні компоненти (`src/components/`) можуть бути використані для інкапсуляції логіки генерації графіків та взаємодії, наприклад:
    ```html
    <a-scene xr-mode-ui="enabled: true">
        <a-entity function-plotter="formula: sin(x); range: -10 10; type: curve"></a-entity>
        <a-camera></a-camera>
    </a-scene>
    ```
* **Безпосередньо Three.js (для більшого контролю):**
    * Створюється `WebGLRenderer`, `Scene`, `Camera`.
    * Для AR/VR сесій використовується `WebXRManager` Three.js.
    * 3D об'єкти графіків додаються безпосередньо до сцени.
    * Обробка вхідних даних від WebXR контролерів або жестів реалізується вручну.
* **MindAR (для маркерної AR):**
    * MindAR ініціалізується з `ARSession` та `ARController`.
    * Завантажуються файли маркерів (`assets/markers/`).
    * При виявленні маркера, Three.js сцена прив'язується до його позиції та орієнтації, і на ньому відображається 3D графік.

### 4.3. Інтеграція ML (опціонально)

* **Розпізнавання формул:**
    * UI надає `<canvas>` для малювання формули.
    * Зображення з канвасу передається до моделі TensorFlow.js (`libs/ml-models/`).
    * ML модель (наприклад, згорточна нейронна мережа, навчена на наборі даних рукописних математичних символів та виразів) виконує інференс.
    * Результат (розпізнана строкова формула) передається до математичного парсера для візуалізації.
    * Код для ML-інтеграції знаходиться у `src/ml/`.

## 5. Модулі та їх відповідальність

* **`src/utils/math-parser.js`:**
    * Парсинг математичних виразів (використовує бібліотеку Math.js).
    * Валідація синтаксису формул.
    * Підтримка змінних ($x, y, t$) та констант ($\pi, e$).
    * Може включати функцію `evaluate(formula, scope)` для обчислення значення виразу в заданому контексті.
* **`src/utils/geometry-generator.js`:**
    * Функції для генерації `Three.BufferGeometry` для різних типів графіків:
        * `generateFunctionCurve(funcStr, xMin, xMax, segments)`
        * `generateParametricCurve(xFuncStr, yFuncStr, zFuncStr, tMin, tMax, segments)`
        * `generateSurface(funcStr, xMin, xMax, yMin, yMax, xSegments, ySegments)`
    * Обробка помилок обчислень (наприклад, ділення на нуль).
* **`src/components/function-plotter.js` (якщо A-Frame):**
    * A-Frame компонент, який інкапсулює логіку:
        * Приймає властивості (formula, type, range, parameters).
        * Спостерігає за змінами властивостей.
        * Викликає `math-parser` та `geometry-generator`.
        * Створює/оновлює Three.js `Mesh` або `Line` об'єкти на сцені.
* **`src/ml/handwriting-recognizer.js` (якщо ML):**
    * Завантаження моделі TensorFlow.js.
    * Передобробка зображення з канвасу (зміна розміру, нормалізація).
    * Виконання інференсу.
    * Постобробка результатів для отримання строкової формули.

## 6. Процес розгортання (Deployment)

Проєкт розгортається на **GitHub Pages**. Для цього необхідно:

1.  Створити репозиторій на GitHub.
2.  Завантажити весь код проєкту у цей репозиторій.
3.  У налаштуваннях репозиторію (Settings -> Pages) вибрати гілку `main` (або `gh-pages`) та папку `/(root)` для публікації.
4.  GitHub Pages автоматично опублікує вміст репозиторію за адресою `https://[Ваш_нікнейм].github.io/[Назва_репозиторію]/`.

## 7. Майбутні покращення та розширення

* **Покращена взаємодія:** Додавання можливості перетягування та зміни розміру графіків безпосередньо у AR/VR режимі.
* **Більше типів графіків:** Неявні функції, полярні координати, векторні поля.
* **Анімація:** Анімація зміни параметрів або руху точки по графіку.
* **Експорт:** Можливість експорту 3D моделей графіків у стандартні формати (GLB, OBJ).
* **Покращення UI/UX:** Більш інтуїтивно зрозумілий інтерфейс для введення формул та керування.
* **Оптимізація продуктивності:** Для складних графіків може знадобитися оптимізація рендерингу (наприклад, LOD - Level of Detail).
* **Розширення ML-моделі:** Навчання моделі розпізнавання на ширшому наборі математичних символів та функцій.